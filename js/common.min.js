var buttons_buy=document.querySelectorAll(".button-buy"),modal_message=document.querySelector(".modal-message"),modal_message_close=document.querySelector(".modal-message-close"),button_write_us=document.querySelector(".button-write-us"),write_us=document.querySelector(".modal-write-us");if(write_us)var modal_write_us_close=write_us.querySelector(".modal-write-us-close"),form=write_us.querySelector("form"),username=write_us.querySelector("[name=name]"),e_mail=write_us.querySelector("[name=e-mail]"),userletter=write_us.querySelector("[name=letter]"),storage_username=localStorage.getItem("username"),storage_e_mail=localStorage.getItem("e_mail");var button_map=document.querySelector(".small-map"),modal_map=document.querySelector(".modal-map");if(modal_map)var no_map=document.querySelector(".modal-map-close");buttons_buy.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),modal_message.classList.add("modal-message-show")})}),modal_message_close.addEventListener("click",function(){modal_message.classList.remove("modal-message-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal_message.classList.contains("modal-message-show")&&modal_message.classList.remove("modal-message-show")}),write_us&&(button_write_us.addEventListener("click",function(e){e.preventDefault(),write_us.classList.add("modal-write-us-show"),storage_username&&storage_e_mail?(username.value=storage_username,e_mail.value=storage_e_mail,userletter.focus()):username.focus()}),modal_write_us_close.addEventListener("click",function(e){e.preventDefault(),write_us.classList.remove("modal-write-us-show"),write_us.classList.remove("modal-error")}),form.addEventListener("submit",function(e){username.value&&e_mail.value&&userletter.value?(localStorage.setItem("username",username.value),localStorage.setItem("e_mail",e_mail.value)):(e.preventDefault(),write_us.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&write_us.classList.contains("modal-write-us-show")&&(write_us.classList.remove("modal-write-us-show"),write_us.classList.remove("modal-error"))})),modal_map&&(button_map.addEventListener("click",function(e){e.preventDefault(),modal_map.classList.add("modal-map-show")}),no_map.addEventListener("click",function(e){e.preventDefault(),modal_map.classList.remove("modal-map-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal_map.classList.contains("modal-map-show")&&modal_map.classList.remove("modal-map-show")}));